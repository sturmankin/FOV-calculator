<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>SMOKERs FOV Calculator</title>

<style>
html, body{
  height:100%;
  overflow:hidden; /* prevent scroll/rubber-band */
}

body{
  margin:0;
  background:#000;
}

/* --- Fly overlay --- */
#fly{
  position:absolute;
  left:50%;
  top:50%;
  width:140px;              /* scale: tweak */
  aspect-ratio: 1 / 1;
  pointer-events:none;
  z-index:9999;

  background-image:url("fly_sheet.png");
  background-repeat:no-repeat;

  /* 4 columns x 2 rows */
  background-size:400% 200%;
  background-position:0% 0%;

  /* walk cycle */
  animation: flyFrames 0.72s steps(8) infinite;

  /* smoother movement */
  will-change: transform;
  transform: translate(-50%,-50%);
  filter: drop-shadow(0 6px 6px rgba(0,0,0,0.25));
}

/* 8 frames total: move through 4 cols then 2nd row */
@keyframes flyFrames{
  0%   { background-position:   0%   0%; }
  12.5%{ background-position:  33.333% 0%; }
  25%  { background-position:  66.666% 0%; }
  37.5%{ background-position: 100%   0%; }
  50%  { background-position:   0% 100%; }
  62.5%{ background-position:  33.333% 100%; }
  75%  { background-position:  66.666% 100%; }
  87.5%{ background-position: 100% 100%; }
  100% { background-position:   0%   0%; }
}

/* Optional: smaller on phones */
@media (max-width:420px){
  #fly{ width:110px; }
}
  
/* Poster container */
.poster{
  position:fixed;
  inset:0;
  margin:auto;

  width:min(94vw, 860px);
  aspect-ratio: 1024 / 1536;

  background:url("bgmm.png") center/cover no-repeat;
  overflow:hidden;
}

/* Soft dark fades under inputs */
.shadeLeft{
  position:absolute;
  left:21%;
  top:74.2%;
  width:34%;
  height:4.8%;
  pointer-events:none;
  background: radial-gradient(
    ellipse at center,
    rgba(0,0,0,0.30) 0%,
    rgba(0,0,0,0.20) 45%,
    rgba(0,0,0,0.0) 85%
  );
}

.shadeRight{
  position:absolute;
  left:54%;
  top:74.2%;
  width:34%;
  height:4.8%;
  pointer-events:none;
  background: radial-gradient(
    ellipse at center,
    rgba(0,0,0,0.30) 0%,
    rgba(0,0,0,0.20) 45%,
    rgba(0,0,0,0.0) 85%
  );
}

/* Inputs + button overlays */
.hit{
  position:absolute;
  border:0;
  outline:0;
  background:transparent;

  color:#ffffff;
  -webkit-text-fill-color:#ffffff;
  caret-color:#ffffff;

  font-family:-apple-system, system-ui, sans-serif;
  font-weight:1000;
  font-size:28px;
  text-align:center;

  padding:0;
  margin:0;

  /* Clean outline using shadow (no text-stroke artifacts) */
  text-shadow:
    -1px 0 #000,
     1px 0 #000,
     0 -1px #000,
     0  1px #000,
     0  3px 0 rgba(0,0,0,0.8);
}

.hit:focus{
  box-shadow:0 0 0 3px rgba(255,255,255,0.2);
  border-radius:12px;
}

/* Result in skull eyes */
.result{
  position:absolute;
  font-family:-apple-system, system-ui, sans-serif;
  font-weight:1000;
  color:#ffffff;

  text-shadow:
    -2px 0 #000,
     2px 0 #000,
     0 -2px #000,
     0  2px #000,
     0  4px 0 rgba(0,0,0,0.85);

  letter-spacing:-0.5px;
  pointer-events:none;
  text-align:center;
  transition:transform 0.15s ease;
}

/* Mobile tweak */
@media (max-width:420px){
  .hit{ font-size:20px; }
}
</style>
</head>

<body>

<div class="poster">

  <!-- Soft shading under inputs -->
  <div class="shadeLeft"></div>
  <div class="shadeRight"></div>

  <!-- DISTANCE -->
  <input id="distance" class="hit"
    inputmode="numeric" pattern="[0-9]*" maxlength="4"
    style="left:21%; top:74.8%; width:34%; height:4.8%;" />

  <!-- WIDTH -->
  <input id="width" class="hit"
    inputmode="numeric" pattern="[0-9]*" maxlength="4"
    style="left:54%; top:74.8%; width:34%; height:4.8%;" />

  <!-- CALCULATE (invisible button area) -->
  <button id="calcBtn" class="hit"
    style="left:20%; top:81.5%; width:60%; height:7%; cursor:pointer;">
  </button>

  <!-- RESULT -->
  <div id="result" class="result"
    style="left:33%; top:14%; width:34%; font-size:56px;">
  </div>

</div>

<script>
const distEl = document.getElementById("distance");
const widthEl = document.getElementById("width");
const resultEl = document.getElementById("result");
const calcBtn = document.getElementById("calcBtn");

function enforce4Digits(el){
  el.value = (el.value || "").replace(/\D+/g, "").slice(0,4);
}

/* Make iPhone “jump” consistent: center the focused field */
function keepInView(el){
  setTimeout(() => {
    try{
      el.scrollIntoView({ block:"center", inline:"nearest" });
    }catch(e){}
  }, 50);
}

distEl.addEventListener("focus", () => keepInView(distEl));
widthEl.addEventListener("focus", () => keepInView(widthEl));

distEl.addEventListener("input", ()=>enforce4Digits(distEl));
widthEl.addEventListener("input", ()=>enforce4Digits(widthEl));

function calculate(){
  enforce4Digits(distEl);
  enforce4Digits(widthEl);

  const D = parseFloat(distEl.value);
  const W = parseFloat(widthEl.value);

  if(!isFinite(D) || !isFinite(W) || D<=0 || W<=0){
    resultEl.textContent="";
    return;
  }

  const angle = 2 * Math.atan((W/2)/D) * 180 / Math.PI;
  resultEl.textContent = angle.toFixed(2) + "°";

  resultEl.style.transform="scale(1.15)";
  setTimeout(()=> resultEl.style.transform="scale(1)",140);
}

calcBtn.addEventListener("click", calculate);

[distEl,widthEl].forEach(el=>{
  el.addEventListener("keydown",(e)=>{
    if(e.key==="Enter") calculate();
  });
});
</script>

</body>
</html>
